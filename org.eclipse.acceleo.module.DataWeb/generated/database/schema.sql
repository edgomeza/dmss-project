-- Esquema de base de datos para Biblioteca Universitaria
-- Generado automáticamente por DataWeb

-- Creación de base de datos
CREATE DATABASE IF NOT EXISTS biblioteca_universitaria;
USE biblioteca_universitaria;

-- Tabla para entidad Libro
CREATE TABLE LIBROS (
    ID_LIBRO INT
     
     PRIMARY KEY
    
,    TITULO VARCHAR(255)
 
    
     NOT NULL
,    AUTOR VARCHAR(255)
 
    
     NOT NULL
,    AÑOPUBLICACION INT
 
    
    
,    DISPONIBLE BOOLEAN
 
    
    
    
    PERTENECE_CATEGORIA_ID INT,
    FOREIGN KEY (PERTENECE_CATEGORIA_ID) REFERENCES CATEGORIAS(ID)
);

-- Tabla para entidad Categoria
CREATE TABLE CATEGORIAS (
    ID_CATEGORIA INT
     
     PRIMARY KEY
    
,    NOMBRE_CATEGORIA VARCHAR(255)
 
    
     NOT NULL
,    DESCRIPCION VARCHAR(255)
 
    
     NOT NULL
    
);

-- Tabla para entidad Usuario
CREATE TABLE USUARIOS (
    ID_USUARIO INT
     
     PRIMARY KEY
    
,    NOMBRE_USUARIO VARCHAR(255)
 
    
     NOT NULL
,    EMAIL VARCHAR(255)
 
    
     NOT NULL
,    ACTIVO BOOLEAN
 
    
    
    
);

-- Tabla para entidad Prestamo
CREATE TABLE PRESTAMOS (
    ID_PRESTAMO INT
     
     PRIMARY KEY
    
,    FECHAPRESTAMO VARCHAR(255)
 
    
     NOT NULL
,    FECHADEVOLUCION VARCHAR(255)
 
    
     NOT NULL
    
    PRESTAMO_USUARIO_ID INT,
    FOREIGN KEY (PRESTAMO_USUARIO_ID) REFERENCES USUARIOS(ID)
,    PRESTAMO_LIBRO_ID INT,
    FOREIGN KEY (PRESTAMO_LIBRO_ID) REFERENCES LIBROS(ID)
);


-- Tablas para Encuestas
CREATE TABLE SURVEYS (
    ID INT PRIMARY KEY AUTO_INCREMENT,
    TITLE VARCHAR(255) NOT NULL,
    DESCRIPTION TEXT,
    REPRESENTATION_TYPE VARCHAR(50)
);

CREATE TABLE SURVEY_QUESTIONS (
    ID INT PRIMARY KEY AUTO_INCREMENT,
    SURVEY_ID INT,
    QUESTION_TEXT TEXT NOT NULL,
    QUESTION_TYPE VARCHAR(50),
    FOREIGN KEY (SURVEY_ID) REFERENCES SURVEYS(ID)
);

CREATE TABLE SURVEY_OPTIONS (
    ID INT PRIMARY KEY AUTO_INCREMENT,
    QUESTION_ID INT,
    OPTION_TEXT VARCHAR(255),
    OPTION_VALUE VARCHAR(100),
    FOREIGN KEY (QUESTION_ID) REFERENCES SURVEY_QUESTIONS(ID)
);

-- Tablas para Cuestionarios
CREATE TABLE QUESTIONNAIRES (
    ID INT PRIMARY KEY AUTO_INCREMENT,
    TITLE VARCHAR(255) NOT NULL,
    DESCRIPTION TEXT
);

CREATE TABLE QUESTIONNAIRE_QUESTIONS (
    ID INT PRIMARY KEY AUTO_INCREMENT,
    QUESTIONNAIRE_ID INT,
    QUESTION_TEXT TEXT NOT NULL,
    QUESTION_TYPE VARCHAR(50),
    CORRECT_ANSWER TEXT,
    FOREIGN KEY (QUESTIONNAIRE_ID) REFERENCES QUESTIONNAIRES(ID)
);

CREATE TABLE QUESTIONNAIRE_OPTIONS (
    ID INT PRIMARY KEY AUTO_INCREMENT,
    QUESTION_ID INT,
    OPTION_TEXT VARCHAR(255),
    OPTION_VALUE VARCHAR(100),
    IS_CORRECT BOOLEAN DEFAULT FALSE,
    FOREIGN KEY (QUESTION_ID) REFERENCES QUESTIONNAIRE_QUESTIONS(ID)
);
